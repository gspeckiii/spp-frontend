/*
 * ====================================================================
 * Swiper Custom Styles (FINAL, WITH COLLAPSE FIX)
 * ====================================================================
 */

/* --- CORE STRUCTURAL STYLES --- */

.swiper-container-wrapper {
  display: flex;
  flex-grow: 1;
  min-height: 0;
  width: 100%;
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  padding-left: 1rem;
  padding-right: 1rem;
}

/* 
  !!! THIS IS THE FIX FOR THE COLLAPSING SLIDER BUG !!!
  This rule targets the main Swiper element ONLY when it's inside our wrapper.
  It forces the slider to take up the full available width, which gives
  Swiper a stable container for its calculations, even when there are
  only one or two slides. This fixes the bug for all sliders.
*/
.swiper-container-wrapper .swiper {
  width: 100%;
  min-width: 0; /* A flexbox safety net to prevent shrinking issues */
}

.swiper-slide__card {
  position: relative;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  background-color: $softBlack;
  border-radius: 6px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  width: 100%;
  height: 100%;
  border: 10px solid $softBlack;
}

/* === IMAGE BEHAVIOR === */
.swiper-slide__image {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 2px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  flex-shrink: 0;
}

/* === CONTENT & FOOTER STRUCTURE === */
.swiper-slide__content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  padding: 1rem 0.5rem;
}

.swiper-slide__main-content {
  /* This block holds the main text content */
}

.swiper-slide__link {
  text-decoration: none;
}

.swiper-slide__footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 1rem;
}
.product-slide__footer {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 1rem;
}

/* --- COMPONENT-SPECIFIC STRUCTURAL STYLES --- */
.swiper-slide__youtube-icon {
  width: 32px;
  height: auto;
}

.swiper-slide__youtube-placeholder {
  width: 32px;
  height: 22px;
}

.swiper-slide__product-count-circle {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  min-width: 32px;
  height: 32px;
  padding: 0 5px;
  background-color: $softWhite;
  color: $softBlack;
  font-weight: bold;
  border-radius: 50%;
  text-decoration: none;
  transition: transform 0.2s ease, background-color 0.2s ease, color 0.2s ease;
  &:hover {
    transform: scale(1.1);
    background-color: $lightRed;
    color: $softWhite;
  }
}

.product-slide__cost-button {
  background-color: $deepRed;
  padding: 0.5rem 1.5rem;
  border-radius: 50px;
  text-decoration: none;
  transition: background-color 0.2s ease-out;
  &:hover {
    background-color: $darkRed;
  }
}

/* --- RESPONSIVE LAYOUT & SPACING --- */
@mixin atSmall {
  .swiper-container-wrapper {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
  .swiper-slide__youtube-icon {
    width: 40px;
  }
  .swiper-slide__youtube-placeholder {
    width: 40px;
    height: 28px;
  }
  .swiper-slide__product-count-circle {
    min-width: 40px;
    height: 40px;
  }
}

@mixin atMedium {
  .swiper-slide__card {
    height: 100%;
  }

  .swiper-slide__footer,
  .product-slide__footer {
    margin-top: auto;
  }

  .swiper-slide__card {
    border-width: 12px;
  }
  .product-slide__cost-button {
    padding: 0.75rem 2rem;
  }
}

@mixin atLarge {
  .swiper-container-wrapper {
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 2rem;
    padding-right: 2rem;
  }
  .swiper-slide__card {
    border-width: 15px;
  }
  .product-slide__cost-button {
    padding: 0.8rem 2.2rem;
  }
  .swiper-slide__youtube-icon {
    width: 48px;
  }
  .swiper-slide__youtube-placeholder {
    width: 48px;
    height: 34px;
  }
  .swiper-slide__product-count-circle {
    min-width: 44px;
    height: 44px;
  }
}

/* NOTE: The broken .product-slide__back-arrow styles have been removed */
