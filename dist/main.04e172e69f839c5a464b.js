(()=>{var e,t={105:()=>{},842:(e,t,a)=>{"use strict";var r=a(540),l=a(338),n=a(794),s=(a(879),a(107)),o=a(83);const c=(0,r.createContext)(),m=(0,r.createContext)(),i="https://shermanpeckproductions.com",u=`${i}/api`,d=`${i}/`;function p({children:e}){const t={loggedIn:Boolean(localStorage.getItem("SPPtoken")),flashMessages:[],user:{token:localStorage.getItem("SPPtoken"),username:localStorage.getItem("SPPusername"),avatar:localStorage.getItem("SPPavatar"),bio:localStorage.getItem("SPPbio"),admin:Boolean(localStorage.getItem("SPPadmin")),user_id:parseInt(localStorage.getItem("SPPuser_id"))||null,refresh_interval:parseInt(localStorage.getItem("SPPrefreshInterval"))||18e5},categories:{list:[],selectedCategory:null,loading:!1,error:null},products:[],urls:{server:i,api:u,images:d}},[a,l]=(0,s.A)((function(e,t){switch(t.type){case"flashMessage":return void e.flashMessages.push(t.value);case"logIn":return e.loggedIn=!0,void(e.user={...t.data,user_id:t.data.user_id,refresh_interval:t.data.refresh_interval||e.user.refresh_interval});case"logOut":return void(e.loggedIn=!1);case"setCategoryLoading":return void(e.categories.loading=!0);case"setCategories":return e.categories.list=Array.from(new Map(t.data.map((e=>[e.cat_id,{...e,prod_count:parseInt(e.prod_count)||0}]))).values()),e.categories.loading=!1,void(e.categories.error=null);case"setCategoryError":return e.categories.error=t.data,void(e.categories.loading=!1)}}),t);return(0,r.useEffect)((()=>{a.loggedIn?localStorage.setItem("SPPtoken",a.user.token):localStorage.removeItem("SPPtoken")}),[a.loggedIn,a.user.token]),(0,r.useEffect)((()=>{const e=o.A.CancelToken.source();return async function(){try{l({type:"setCategoryLoading"});const t=await o.A.get("/categories",{cancelToken:e.token});l({type:"setCategories",data:t.data})}catch(e){console.error("Fetch public categories error:",e),l({type:"setCategoryError",data:"Could not fetch category data."})}}(),()=>e.cancel()}),[]),(0,r.useEffect)((()=>(a.loggedIn,()=>clearInterval(void 0))),[a.loggedIn,a.user.refresh_interval]),r.createElement(c.Provider,{value:a},r.createElement(m.Provider,{value:l},e))}o.A.defaults.baseURL=u,console.log("Axios API baseURL configured to:",o.A.defaults.baseURL);const g=function(e){return r.createElement("div",{className:"container "+(e.wide?"":"Container--narrow")},e.children)},_=function(e){return(0,r.useEffect)((()=>{document.title=`${e.title} | SPP`,window.scrollTo(0,0)}),[]),r.createElement(g,{wide:e.wide},e.children)};var E=a(325),h=a(636);const f=function(){return r.createElement("div",{className:"dots-loading"},r.createElement("div",null))},v=function(){const e=(0,r.useContext)(c),{urls:t,categories:a}=e,[l,s]=(0,r.useState)({}),o=(0,r.useMemo)((()=>a.list||[]),[a.list]);if((0,r.useEffect)((()=>{0!==o.length&&(async()=>{const e=o.map((async e=>{if(!e.cat_id)return[e.cat_id,0];try{const a=await fetch(`${t.api}/products/category/${e.cat_id}`);if(a.ok){const t=await a.json();return[e.cat_id,Array.isArray(t)?t.length:0]}return[e.cat_id,0]}catch(t){return console.error(`Error fetching products for category ${e.cat_id}:`,t.message),[e.cat_id,0]}})),a=await Promise.all(e),r=Object.fromEntries(a);s(r)})()}),[o,t.api]),a.loading)return r.createElement("div",{className:"swiper-container-wrapper"},r.createElement(f,null));if(0===o.length)return r.createElement("div",{className:"swiper-container-wrapper"},"No categories available");const m=o.filter((e=>e.cat_img_path));return 0===m.length?r.createElement("div",{className:"swiper-container-wrapper"},"No category images available"):r.createElement("div",{className:"swiper-container-wrapper"},r.createElement(E.RC,{modules:[h.Vx],spaceBetween:10,slidesPerView:1,navigation:!0,className:"swiper",breakpoints:{640:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}}},m.map((e=>r.createElement(E.qr,{key:e.cat_id},r.createElement("div",{className:"swiper-slide__card"},r.createElement("img",{src:e.cat_img_path?`${t.images}${e.cat_img_path}`:"/assets/images/default.jpg",alt:e.cat_name||"Category",className:"swiper-slide__image",onError:e=>{e.target.src="/assets/images/default.jpg"}}),r.createElement("div",{className:"swiper-slide__content"},r.createElement(n.N_,{to:`/category/${e.cat_id}/products`,className:"swiper-slide__link"},r.createElement("h3",{className:"swiper-slide__title"},e.cat_name||"Unknown"),e.cat_desc&&r.createElement("p",{className:"swiper-slide__subtitle"},e.cat_desc)),r.createElement("div",{className:"swiper-slide__footer"},e.cat_vid?r.createElement("a",{href:e.cat_vid,target:"_blank",rel:"noopener noreferrer",className:"swiper-slide__youtube"},r.createElement("img",{src:"/assets/images/icons/youtube.svg",alt:"Watch on YouTube",className:"swiper-slide__youtube-icon"})):r.createElement("div",{className:"swiper-slide__youtube-placeholder"}),r.createElement(n.N_,{to:`/category/${e.cat_id}/products`,className:"swiper-slide__product-count-circle"},void 0!==l[e.cat_id]?l[e.cat_id]:"...")))))))))},y=function(e){return(0,r.useContext)(c),r.createElement(_,{title:"Home"},r.createElement("div",{className:"page-content"},r.createElement(v,null)))},b=function(e){return(0,r.useContext)(c),r.createElement(_,{title:"Home"},r.createElement("div",{className:"page-content"},r.createElement(v,null)))},N=function(){return r.createElement(_,{title:"About Us"},r.createElement("div",{className:"wrapper wrapper--dark wrapper--center"},r.createElement("h1",{classname:""},"About Us"),r.createElement("p",null,"Last updated: October 2023"),r.createElement("p",null,"Welcome to Sherman Peck Productions. We are dedicated to creating engaging and innovative content that inspires and entertains."),r.createElement("p",null,"Our team is passionate about storytelling and committed to delivering high-quality productions."),r.createElement("p",null,"If you have any questions or would like to collaborate, please contact us.")))},w=function(e){return r.createElement(_,{title:"Terms and Conditions"},r.createElement("div",{className:"wrapper wrapper--dark wrapper--center"},r.createElement("h1",null,"Terms and Conditions"),r.createElement("p",{className:"lead text-muted"},"Last updated: July-",(new Date).getFullYear()),r.createElement("p",null,"Welcome to Sherman Peck Productions. By accessing our website, you agree to comply with and be bound by the following terms and conditions:"),r.createElement("ul",null,r.createElement("li",null,"Use of this site is at your own risk."),r.createElement("li",null,"All content provided on this site is for informational purposes only."),r.createElement("li",null,"We reserve the right to modify these terms at any time.")),r.createElement("p",null,"If you have any questions about these terms, please contact us.")))},C=o.A.create({baseURL:u});C.interceptors.request.use((e=>{const t=localStorage.getItem("SPPtoken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}));const x=e=>C.get(`/categories/${e}`),S=e=>C.get(`/products/${e}`),k=function(){const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)("");return(0,n.Zp)(),r.createElement(_,{title:"Request Password Reset"},r.createElement("form",{onSubmit:async function(t){t.preventDefault();try{await(e=>C.post("/users/request-password-reset",{email:e}))(e),l("Password reset email has been sent. Please check your inbox.")}catch(t){console.error("Error requesting password reset:",t),l(t.response?t.response.data.error:"Error making the request. Please try again.")}},className:"form"},r.createElement("h2",{className:"form__heading"},"Reset Your Password"),r.createElement("p",{className:"form__helper-text",style:{textAlign:"center",marginBottom:"1.5rem"}},"Enter your email address and we will send you a link to reset your password."),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"email-reset",className:"form__label"},"Email Address"),r.createElement("input",{value:e,onChange:e=>t(e.target.value),id:"email-reset",name:"email",className:"form__input",type:"email",placeholder:"you@example.com",autoComplete:"email",required:!0})),r.createElement("button",{type:"submit",className:"form__button"},"Send Reset Link"),a&&r.createElement("p",{className:"form__success-message"},a)))},P=function(){const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[c]=(0,n.ok)(),m=(0,n.Zp)();return(0,r.useEffect)((()=>{const e=c.get("token");e&&t(e)}),[c]),r.createElement(_,{title:"Reset Password"},r.createElement("form",{onSubmit:async function(t){if(t.preventDefault(),e&&a)try{const t=await((e,t)=>C.post("/users/reset-password",{token:e,newPassword:t}))(e,a);o(t.data.message),setTimeout((()=>m("/")),2e3)}catch(t){console.error("Error resetting password:",t),o(t.response?t.response.data.error:"Error resetting password")}else o("Token and new password are required.")},className:"form"},r.createElement("h2",{className:"form__heading"},"Reset Your Password"),r.createElement("p",{className:"form__helper-text",style:{textAlign:"center",marginBottom:"1.5rem"}},"Please enter your new password below."),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"token-field",className:"form__label"},"Reset Token"," ",r.createElement("span",{className:"form__helper-text--info"},"(From Email)")),r.createElement("input",{value:e,onChange:e=>t(e.target.value),id:"token-field",className:"form__input",type:"text",placeholder:"Paste token here"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"new-password",className:"form__label"},"New Password"),r.createElement("input",{value:a,onChange:e=>l(e.target.value),id:"new-password",className:"form__input",type:"password",placeholder:"Enter new password",required:!0})),r.createElement("button",{type:"submit",className:"form__button"},"Reset Password"),s&&r.createElement("p",{className:"form__success-message"},s)))},I=function(e){return(0,r.useEffect)((()=>{if(e.dispatch&&!e.isValidationMessage&&e.messages.length>0){const t=setTimeout((()=>{e.dispatch({type:"clearFlashMessages"})}),3e3);return()=>clearTimeout(t)}}),[e.messages,e.dispatch,e.isValidationMessage]),0===e.messages.length?null:r.createElement("div",{className:"flash-messages"},r.createElement("div",{className:"flash-messages__alert-container"},e.messages.map(((t,a)=>{const l=e.isValidationMessage?"flash-messages__alert--danger":"flash-messages__alert--success";return r.createElement("div",{key:a,className:`flash-messages__alert ${l} flash-messages__alert--floating`},t)}))))},A=function(){const e=(0,r.useContext)(m),t=(0,n.Zp)(),[a,l]=(0,s.A)((function(e,t){switch(t.type){case"usernameImmediately":return e.username.value=t.value,e.username.value.length>30?(e.username.hasErrors=!0,void(e.username.message="Username cannot exceed 30 characters.")):e.username.value&&!/^[a-zA-Z0-9]+$/.test(e.username.value)?(e.username.hasErrors=!0,void(e.username.message="Username can only contain letters and numbers.")):void(e.username.hasErrors=!1);case"usernameAfterDelay":return t.value.length<3&&(e.username.hasErrors=!0,e.username.message="Username must be at least 3 characters."),void(e.username.hasErrors||t.noRequest||e.username.checkCount++);case"usernameUniqueResults":return void(t.value?(e.username.hasErrors=!0,e.username.isUnique=!1,e.username.message="That username is already taken."):e.username.isUnique=!0);case"emailImmediately":return e.email.value=t.value,void(e.email.hasErrors=!1);case"emailAfterDelay":return/^\S+@\S+$/.test(t.value)||(e.email.hasErrors=!0,e.email.message="You must provide a valid email address."),void(e.email.hasErrors||t.noRequest||e.email.checkCount++);case"emailUniqueResults":return void(t.value?(e.email.hasErrors=!0,e.email.isUnique=!1,e.email.message="That email is already being used."):e.email.isUnique=!0);case"passwordImmediately":return e.password.value=t.value,e.password.value.length>50?(e.password.hasErrors=!0,void(e.password.message="Password cannot exceed 50 characters.")):void(e.password.hasErrors=!1);case"passwordAfterDelay":return void(t.value.length<12&&(e.password.hasErrors=!0,e.password.message="Password must be at least 12 characters."));case"submitForm":return void(e.username.hasErrors||!e.username.isUnique||e.email.hasErrors||!e.email.isUnique||e.password.hasErrors||e.submitCount++)}}),{username:{value:"",hasErrors:!1,message:"",isUnique:!1,checkCount:0},email:{value:"",hasErrors:!1,message:"",isUnique:!1,checkCount:0},password:{value:"",hasErrors:!1,message:""},submitCount:0});(0,r.useEffect)((()=>{if(a.username.value){const e=setTimeout((()=>l({type:"usernameAfterDelay",value:a.username.value})),800);return()=>clearTimeout(e)}}),[a.username.value]),(0,r.useEffect)((()=>{if(a.email.value){const e=setTimeout((()=>l({type:"emailAfterDelay",value:a.email.value})),800);return()=>clearTimeout(e)}}),[a.email.value]),(0,r.useEffect)((()=>{if(a.password.value){const e=setTimeout((()=>l({type:"passwordAfterDelay",value:a.password.value})),800);return()=>clearTimeout(e)}}),[a.password.value]),(0,r.useEffect)((()=>{if(a.username.checkCount){let e=!1;return(async()=>{try{const r=await(t=a.username.value,C.post("/users/checkRegUsername",{username:t}));e||l({type:"usernameUniqueResults",value:r.data})}catch(t){e||console.log("There was a problem checking the username.")}var t})(),()=>e=!0}}),[a.username.checkCount]),(0,r.useEffect)((()=>{if(a.email.checkCount){let e=!1;return(async()=>{try{const r=await(t=a.email.value,C.post("/users/checkRegEmail",{email:t}));e||l({type:"emailUniqueResults",value:r.data})}catch(t){e||console.log("There was a problem checking the email.")}var t})(),()=>e=!0}}),[a.email.checkCount]),(0,r.useEffect)((()=>{if(a.submitCount){let r=!1;return(async()=>{try{const n=await(l={username:a.username.value,email:a.email.value,password:a.password.value},C.post("/users",l));r||(e({type:"logIn",data:n.data}),e({type:"flashMessage",value:"Congrats! Welcome to your new account."}),t("/home"))}catch(t){r||e({type:"flashMessage",value:"Registration failed. Please try again."})}var l})(),()=>r=!0}}),[a.submitCount,e,t]);const o=[];return a.username.hasErrors&&o.push(a.username.message),a.email.hasErrors&&o.push(a.email.message),a.password.hasErrors&&o.push(a.password.message),r.createElement("div",{className:"wrapper wrapper--wide"},r.createElement(I,{messages:o,isValidationMessage:!0}),r.createElement("div",{className:"form"},r.createElement("form",{onSubmit:function(e){e.preventDefault(),l({type:"usernameImmediately",value:a.username.value}),l({type:"usernameAfterDelay",value:a.username.value,noRequest:!0}),l({type:"emailImmediately",value:a.email.value}),l({type:"emailAfterDelay",value:a.email.value,noRequest:!0}),l({type:"passwordImmediately",value:a.password.value}),l({type:"passwordAfterDelay",value:a.password.value}),l({type:"submitForm"})}},r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"username-register",className:"form__label"},r.createElement("small",null,"Username")),r.createElement("input",{onChange:e=>l({type:"usernameImmediately",value:e.target.value}),id:"username-register",name:"username",className:"form__input",type:"text",placeholder:"Pick a username",autoComplete:"off"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"email-register",className:"form__label"},r.createElement("small",null,"Email")),r.createElement("input",{onChange:e=>l({type:"emailImmediately",value:e.target.value}),id:"email-register",name:"email",className:"form__input",type:"text",placeholder:"you@example.com",autoComplete:"off"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"password-register",className:"form__label"},r.createElement("small",null,"Password")),r.createElement("input",{onChange:e=>l({type:"passwordImmediately",value:e.target.value}),id:"password-register",name:"password",className:"form__input",type:"password",placeholder:"Create a password"})),r.createElement("button",{type:"submit",className:"form__button"},"Sign up"))))},$=function(){return r.createElement("div",{className:"page-section page-section--background"},r.createElement("div",{className:"wrapper"},r.createElement("div",{className:"dashboard"},r.createElement("h2",{className:"dashboard__heading"},"Admin Dashboard"),r.createElement("div",{className:"dashboard__row"},r.createElement("div",{className:"dashboard__col"},r.createElement(n.N_,{to:"/admin-category-post",className:"dashboard__button"},"Add Category")),r.createElement("div",{className:"dashboard__col"},r.createElement(n.N_,{to:"/admin-category-put-select",className:"dashboard__button"},"Lookup Categories to Edit"))))))},q=function(){const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),i=(0,n.Zp)(),u=(0,r.useContext)(c),d=(0,r.useContext)(m),[p,g]=(0,r.useState)(!1);return u.user.admin?r.createElement(_,{title:"Add New Category"},r.createElement("form",{onSubmit:async function(t){t.preventDefault(),g(!0);try{const t=await(l={cat_name:e,cat_desc:a,cat_vid:s||null},C.post("/categories",l));console.log("Create category response:",t.data),d({type:"addCategory",data:t.data}),d({type:"flashMessage",value:"Category added successfully!"}),i("/admin-dashboard")}catch(t){var r;d({type:"flashMessage",value:t.response?t.response.data.error:"Error adding category"}),console.error("Error adding category:",(null===(r=t.response)||void 0===r?void 0:r.data)||t.message)}finally{g(!1)}var l},className:"form"},r.createElement("h2",{className:"form__heading"},"Add New Category"),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"cat-name",className:"form__label"},"Category Name"),r.createElement("input",{value:e,onChange:e=>t(e.target.value),id:"cat-name",className:"form__input",type:"text",placeholder:"Enter category name",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"cat-desc",className:"form__label"},"Description"),r.createElement("input",{value:a,onChange:e=>l(e.target.value),id:"cat-desc",className:"form__input",type:"text",placeholder:"Enter description",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"cat-vid",className:"form__label"},"Video Link"),r.createElement("input",{value:s,onChange:e=>o(e.target.value),id:"cat-vid",className:"form__input",type:"url",placeholder:"Enter video URL (optional)"})),r.createElement("button",{type:"submit",className:"form__button",disabled:p},p?"Adding...":"Add Category"),r.createElement(n.N_,{to:"/admin-dashboard",className:"form__button",style:{marginTop:"0.5rem",backgroundColor:"#6c757d",borderColor:"#6c757d"}},"Back to Dashboard"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission to perform this action."))},M=function(){const e=(0,r.useContext)(c),t=(0,r.useContext)(m),{categories:a,user:l,urls:s}=e,[o,i]=(0,r.useState)(null),u=e=>{console.log("Selecting category:",e),t({type:"selectCategory",data:e})};return l.admin?a.loading?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):a.error?r.createElement(_,{title:"Error"},r.createElement("p",{className:"text-danger"},a.error)):a.list&&0!==a.list.length?r.createElement(_,{title:"Manage Categories"},r.createElement("div",{className:"page-section"},r.createElement("div",{className:"table-select"},r.createElement("div",{className:"table-select__section-heading"},r.createElement("h1",null,"Categories"),r.createElement(n.N_,{to:"/admin-category-post",className:"table-select__button table-select__button--success"},"Add Category")),r.createElement("table",{className:"table-select__table"},r.createElement("thead",{className:"table-select__heading"},r.createElement("tr",null,r.createElement("th",null,"Category Name"),r.createElement("th",null,"Product Count"),r.createElement("th",null,"Image"),r.createElement("th",null,"Actions"))),r.createElement("tbody",null,a.list.map((e=>r.createElement("tr",{key:e.cat_id},r.createElement("td",null,e.cat_name||"Unknown"),r.createElement("td",null,e.prod_count||0),r.createElement("td",null,e.cat_img_path&&r.createElement("img",{src:`${s.images}${e.cat_img_path}`,alt:`Thumbnail for ${e.cat_name||"category"}`,className:"table-select__thumbnail"})),r.createElement("td",null,r.createElement(n.N_,{to:`/admin-category-put/${e.cat_id}`,className:"table-select__button",onClick:()=>u(e)},"Edit"),0===(e.prod_count||0)&&r.createElement("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category? This action cannot be undone.")){i(e);try{await(l=e,C.delete(`/categories/${l}`)),t({type:"deleteCategory",data:e}),t({type:"flashMessage",value:"Category deleted successfully!"})}catch(e){var a,r;console.error("Delete category error:",(null===(a=e.response)||void 0===a?void 0:a.data)||e.message),t({type:"flashMessage",value:(null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||"Error deleting category"})}finally{i(null)}}var l})(e.cat_id),className:"table-select__button table-select__button--danger",disabled:o===e.cat_id},o===e.cat_id?"Deleting...":"Delete"),r.createElement(n.N_,{to:`/admin-product-put-select/${e.cat_id}`,className:"table-select__button",onClick:()=>u(e)},"Products"),r.createElement(n.N_,{to:`/admin-category-image-post/${e.cat_id}`,className:"table-select__button",onClick:()=>u(e)},"Upload Img"))))))),r.createElement(n.N_,{to:"/admin-dashboard",className:"form__button form__button--secondary"},"Back to Dashboard")))):r.createElement(_,{title:"Manage Categories"},r.createElement("div",{className:"table-select"},r.createElement("div",{className:"table-select__section-heading"},r.createElement("h1",null,"Categories"),r.createElement(n.N_,{to:"/admin-category-post",className:"table-select__button table-select__button--success"},"Add Category")),r.createElement("p",null,"No categories available. Please add one."),r.createElement(n.N_,{to:"/admin-dashboard",className:"form__button form__button--secondary"},"Back to Dashboard"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission to perform this action."))},F=function(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),a=(0,r.useContext)(c),l=(0,r.useContext)(m),[s,o]=(0,r.useState)(null),[i,u]=(0,r.useState)(!0),[d,p]=(0,r.useState)(null),[g,E]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const t=await x(e);console.log("Fetched category:",t.data),o(t.data)}catch(e){console.error("Error fetching category details:",e),p("Could not load category information.")}u(!1)})()}),[e]);const h=e=>{const{name:t,value:a}=e.target;o((e=>({...e,[t]:a})))};return a.user.admin?i?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):d?r.createElement(_,{title:"Error"},r.createElement("p",{className:"text-center text-danger"},d)):r.createElement(_,{title:`Edit Category: ${null==s?void 0:s.cat_name}`},r.createElement("form",{onSubmit:async a=>{a.preventDefault(),E(!0);try{const a=await(n=e,o={cat_name:s.cat_name,cat_desc:s.cat_desc,cat_vid:s.cat_vid||null},C.put(`/categories/${n}`,o));console.log("Update response:",a.data),l({type:"updateCategory",data:a.data}),l({type:"flashMessage",value:"Category updated successfully!"}),t("/admin-dashboard")}catch(a){var r;l({type:"flashMessage",value:(null===(r=a.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||"Error updating category"})}finally{E(!1)}var n,o},className:"form"},r.createElement("div",{className:"form__heading",style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.createElement("h2",null,"Edit Category"),r.createElement(n.N_,{to:`/admin-product-put-select/${e}`,className:"form__button",style:{marginTop:0,padding:"0.5rem 1rem"}},"Manage Products")),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"cat_name",className:"form__label"},"Category Name"),r.createElement("input",{type:"text",name:"cat_name",value:s.cat_name,onChange:h,className:"form__input",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"cat_desc",className:"form__label"},"Description"),r.createElement("input",{type:"text",name:"cat_desc",value:s.cat_desc,onChange:h,className:"form__input",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"cat_vid",className:"form__label"},"Video Link"),r.createElement("input",{type:"url",name:"cat_vid",value:s.cat_vid||"",onChange:h,className:"form__input"})),r.createElement("button",{type:"submit",className:"form__button",disabled:g},g?"Saving...":"Update Category"),r.createElement(n.N_,{to:"/admin-dashboard",className:"form__button form__button--secondary"},"Back to Dashboard"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission."))},U=function(){const{id:e}=(0,n.g)(),{user:t}=(0,r.useContext)(c),a=(0,r.useContext)(m),[l,s]=(0,r.useState)(null),[o,i]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[E,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const[r,l]=await Promise.all([x(e),(t=e,C.get(`/products/category/${t}`))]);s(r.data),i(l.data),a({type:"selectCategory",data:r.data}),a({type:"setProducts",data:l.data})}catch(e){console.error("Fetch error:",e),g("Could not load data for this category.")}var t;d(!1)})()}),[e,a]);return t.admin?u?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):p?r.createElement(_,{title:"Error"},r.createElement("p",{className:"text-center text-danger"},p)):r.createElement(_,{title:`Manage Products in ${(null==l?void 0:l.cat_name)||"Category"}`},r.createElement("div",{className:"table-select"},r.createElement("div",{className:"table-select__section-heading"},r.createElement("h1",null,"Products in: ",l?l.cat_name:"..."),r.createElement(n.N_,{to:`/admin-product-post/${e}`,className:"table-select__button table-select__button--success"},"Add Product")),0===o.length?r.createElement("p",{className:"text-center"},"No products have been added to this category yet."):r.createElement("table",{className:"table-select__table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Product Name"),r.createElement("th",null,"Price"),r.createElement("th",null,"Image Count"),r.createElement("th",null,"Actions"))),r.createElement("tbody",null,o.map((t=>r.createElement("tr",{key:t.id},r.createElement("td",null,t.prod_name),r.createElement("td",null,"$",t.prod_cost||"0.00"),r.createElement("td",null,t.img_count||0),r.createElement("td",null,r.createElement(n.N_,{to:`/admin-product-put/${t.id}`,className:"table-select__button"},"Edit"),0===(parseInt(t.img_count)||0)&&r.createElement("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this product?")){h(t);try{await(e=>C.delete(`/products/${e}`))(t),i((e=>e.filter((e=>e.id!==t)))),a({type:"decrementProdCount",data:parseInt(e)}),a({type:"flashMessage",value:"Product deleted successfully!"})}catch(e){var r;a({type:"flashMessage",value:(null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||"Error deleting product"})}finally{h(null)}}})(t.id),className:"table-select__button table-select__button--danger",disabled:E===t.id},E===t.id?"...":"Delete"),r.createElement(n.N_,{to:`/admin-product-image-put-select/${t.id}`,className:"table-select__button"},"Manage Images"))))))),r.createElement(n.N_,{to:"/admin-category-put-select",className:"form__button form__button--secondary"},"Back to Categories"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission."))},D=function(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),{user:a}=(0,r.useContext)(c),l=(0,r.useContext)(m),[s,o]=(0,r.useState)({prod_name:"",prod_desc:"",prod_cost:"",cat_fk:e||""}),[i,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(!0),[g,E]=(0,r.useState)(!1),[h,v]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const t=await x(e);u(t.data.cat_name||"Unknown Category")}catch(e){v("Error fetching category details.")}p(!1)})()}),[e]);const y=e=>{const{name:t,value:a}=e.target;o((e=>({...e,[t]:a})))};return a.admin?d?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):h?r.createElement(_,{title:"Error"},r.createElement("p",{className:"text-center text-danger"},h)):r.createElement(_,{title:`Add Product to ${i}`},r.createElement("form",{onSubmit:async a=>{a.preventDefault(),E(!0);try{await(n=s,C.post("/products",n)),l({type:"incrementProdCount",data:parseInt(e)}),l({type:"flashMessage",value:"Product added successfully!"}),t(`/admin-product-put-select/${e}`)}catch(a){var r;l({type:"flashMessage",value:(null===(r=a.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||"Error adding product"})}finally{E(!1)}var n},className:"form"},r.createElement("h2",{className:"form__heading"},"Add Product to ",i),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"prod_name",className:"form__label"},"Product Name"),r.createElement("input",{type:"text",name:"prod_name",value:s.prod_name,onChange:y,className:"form__input",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"prod_desc",className:"form__label"},"Description"),r.createElement("input",{type:"text",name:"prod_desc",value:s.prod_desc,onChange:y,className:"form__input",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"prod_cost",className:"form__label"},"Cost"),r.createElement("input",{type:"number",name:"prod_cost",value:s.prod_cost,onChange:y,className:"form__input",step:"0.01",required:!0})),r.createElement("button",{type:"submit",className:"form__button",disabled:g},g?"Adding...":"Add Product"),r.createElement("button",{type:"button",className:"form__button form__button--secondary",onClick:()=>{t(`/admin-product-put-select/${e}`)}},"Cancel"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission."))},T=function(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),{user:a}=(0,r.useContext)(c),l=(0,r.useContext)(m),[s,o]=(0,r.useState)(null),[i,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(!0),[g,E]=(0,r.useState)(!1),[h,v]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const t=(await S(e)).data;if(o(t),t.cat_fk){const e=await x(t.cat_fk);u(e.data.cat_name||"Unknown Category")}}catch(e){console.error("Error fetching data:",e),v("Could not load product data.")}p(!1)})()}),[e]);const y=e=>{const{name:t,value:a}=e.target;o((e=>({...e,[t]:a})))};return a.admin?d?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):h||!s?r.createElement(_,{title:"Error"},r.createElement("p",{className:"text-center text-danger"},h||"Product not found.")):r.createElement(_,{title:`Edit Product: ${s.prod_name}`},r.createElement("form",{onSubmit:async a=>{a.preventDefault(),E(!0);try{await(n=e,o={prod_name:s.prod_name,prod_desc:s.prod_desc,prod_cost:s.prod_cost,cat_fk:s.cat_fk},C.put(`/products/${n}`,o)),l({type:"flashMessage",value:"Product updated successfully!"}),t(`/admin-product-put-select/${s.cat_fk}`)}catch(a){var r;l({type:"flashMessage",value:(null===(r=a.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||"Error updating product"})}finally{E(!1)}var n,o},className:"form"},r.createElement("h2",{className:"form__heading"},"Edit Product in ",i),r.createElement("div",{className:"form__group"},r.createElement("label",{className:"form__label",htmlFor:"prod_name"},"Product Name"),r.createElement("input",{type:"text",name:"prod_name",value:s.prod_name,onChange:y,className:"form__input",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{className:"form__label",htmlFor:"prod_desc"},"Description"),r.createElement("input",{type:"text",name:"prod_desc",value:s.prod_desc||"",onChange:y,className:"form__input",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{className:"form__label",htmlFor:"prod_cost"},"Cost"),r.createElement("input",{type:"number",name:"prod_cost",value:s.prod_cost,onChange:y,className:"form__input",step:"0.01",required:!0})),r.createElement("button",{type:"submit",className:"form__button",disabled:g},g?"Saving...":"Update Product"),r.createElement("button",{type:"button",className:"form__button form__button--secondary",onClick:()=>{t(`/admin-product-put-select/${s.cat_fk}`)}},"Cancel"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission."))};var R=a(472);const B=function(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),a=(0,n.zy)(),{user:l}=(0,r.useContext)(c),s=(0,r.useContext)(m),[o,i]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[E,h]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),b=(0,r.useRef)(null);return(0,r.useEffect)((()=>{(async()=>{try{const t=await S(e);g(t.data)}catch(e){s({type:"flashMessage",value:"Error fetching product details."})}d(!1)})()}),[e,s]),l.admin?u?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):r.createElement(_,{title:`Add Images to ${(null==p?void 0:p.prod_name)||"Product"}`},r.createElement("form",{onSubmit:async r=>{if(r.preventDefault(),0===o.length||E)return void h("Please select valid image(s) to upload.");y(!0);const l=new FormData;o.forEach((e=>l.append("image",e)));try{var n;const r=await((e,t)=>C.post(`/images/product/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}}))(e,l);s({type:"incrementImgCount",data:{productId:parseInt(e),count:r.data.count||o.length}}),s({type:"flashMessage",value:"Images added successfully!"});const c=(null==p?void 0:p.cat_fk)||(null===(n=a.state)||void 0===n?void 0:n.categoryId);t(c?`/admin-product-put-select/${c}`:"/admin-dashboard")}catch(r){var c;s({type:"flashMessage",value:(null===(c=r.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.error)||"Error adding images"})}finally{y(!1)}},className:"form"},r.createElement("h2",{className:"form__heading"},"Add Images to ",(null==p?void 0:p.prod_name)||"..."),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"images",className:"form__label"},"Product Images"),r.createElement("input",{type:"file",name:"images",onChange:e=>{const t=Array.from(e.target.files);if(0===t.length)return h("Please select at least one image."),void setImage([]);const a=["image/jpeg","image/png","image/gif"];for(const e of t){if(!a.includes(e.type))return h("All images must be a JPEG, PNG, or GIF."),void i([]);if(e.size>5242880)return h("All images must be less than 5MB."),void i([])}h(null),i(t)},className:"form__input",id:"images",multiple:!0,accept:"image/jpeg,image/png,image/gif"}),r.createElement("small",{className:"form__helper-text"},"Select one or more images (JPEG, PNG, GIF, max 5MB each)"),r.createElement(R.A,{nodeRef:b,in:!!E,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0},r.createElement("div",{ref:b,className:"form__validation-message"},E))),r.createElement("div",{className:"form__group"},r.createElement("button",{type:"submit",className:"form__button",disabled:!!E||0===o.length||v},v?"Uploading...":"Add Images"),r.createElement("button",{type:"button",className:"form__button form__button--secondary",onClick:()=>{var e;const r=(null==p?void 0:p.cat_fk)||(null===(e=a.state)||void 0===e?void 0:e.categoryId);t(r?`/admin-product-put-select/${r}`:"/admin-dashboard")}},"Cancel")))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission."))},L=function(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),a=(0,n.zy)(),l=(0,r.useContext)(c),s=(0,r.useContext)(m),[o,i]=(0,r.useState)(null),[u,d]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!1),[E,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const a=await(t=e,C.get(`/images/${t}`));i(a.data)}catch(e){h("Could not load image details.")}var t;d(!1)})()}),[e]);const v=e=>{const{name:t,value:a}=e.target;i((e=>({...e,[t]:a})))};return l.user.admin?u?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):E||!o?r.createElement(_,{title:"Error"},r.createElement("p",{className:"text-center text-danger"},E||"Image not found.")):r.createElement(_,{title:"Edit Image Metadata"},r.createElement("form",{onSubmit:async r=>{r.preventDefault(),g(!0);const l={img_desc:o.img_desc,img_order:parseInt(o.img_order)||0,img_media:parseInt(o.img_media)||0};try{var n;await(m=e,i=l,C.put(`/images/${m}`,i)),s({type:"flashMessage",value:"Image metadata updated successfully!"});const r=null===(n=a.state)||void 0===n?void 0:n.productId;t(r?`/admin-product-image-put-select/${r}`:"/admin-dashboard")}catch(r){var c;s({type:"flashMessage",value:(null===(c=r.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.error)||"Error updating image"})}finally{g(!1)}var m,i},className:"form"},r.createElement("h2",{className:"form__heading"},"Editing Image"),o.img_path&&r.createElement("div",{className:"form__group text-center"},r.createElement("img",{src:`${l.urls.images}${o.img_path}`,alt:o.img_desc||"Image preview",style:{maxWidth:"300px",maxHeight:"300px",objectFit:"contain",margin:"0 auto",borderRadius:"4px"}}),r.createElement("small",{className:"form__helper-text"},o.img_path)),r.createElement("div",{className:"form__group"},r.createElement("label",{className:"form__label",htmlFor:"img_desc"},"Image Description"),r.createElement("input",{type:"text",name:"img_desc",value:o.img_desc,onChange:v,className:"form__input",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{className:"form__label",htmlFor:"img_order"},"Display Order"),r.createElement("input",{type:"number",name:"img_order",value:o.img_order,onChange:v,className:"form__input",min:"0",required:!0})),r.createElement("div",{className:"form__group"},r.createElement("label",{className:"form__label",htmlFor:"img_media"},"Media Type"),r.createElement("input",{type:"number",name:"img_media",value:o.img_media,onChange:v,className:"form__input",min:"0",required:!0})),r.createElement("button",{type:"submit",className:"form__button",disabled:p},p?"Saving...":"Update Metadata"),r.createElement("button",{type:"button",className:"form__button form__button--secondary",onClick:()=>{var e;const r=null===(e=a.state)||void 0===e?void 0:e.productId;t(r?`/admin-product-image-put-select/${r}`:"/admin-dashboard")}},"Cancel"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission."))},O=function(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),{user:a,urls:l}=((0,n.zy)(),(0,r.useContext)(c)),s=(0,r.useContext)(m),[o,i]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[E,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const[a,r]=await Promise.all([S(e),(t=e,C.get(`/images/product/${t}`))]);g(a.data),i(r.data)}catch(e){console.error("Error fetching product data and images:",e),s({type:"flashMessage",value:"Could not load product data."})}var t;d(!1)})()}),[e,s]);return a.admin?u?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):p?r.createElement(_,{title:`Manage Images for ${p.prod_name}`},r.createElement("div",{className:"table-select"},r.createElement("div",{className:"table-select__section-heading"},r.createElement("h1",null,"Images for: ",p.prod_name),r.createElement(n.N_,{to:`/admin-product-image-post/${e}`,state:{categoryId:p.cat_fk},className:"table-select__button table-select__button--success"},"Add New Images")),0===o.length?r.createElement("p",{className:"text-center"},"No images have been uploaded for this product yet."):r.createElement("table",{className:"table-select__table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Thumbnail"),r.createElement("th",null,"Description"),r.createElement("th",null,"Order"),r.createElement("th",null,"Media Type"),r.createElement("th",null,"Actions"))),r.createElement("tbody",null,o.map((a=>r.createElement("tr",{key:a.id},r.createElement("td",null,a.img_path&&r.createElement("img",{src:`${l.images}${a.img_path}`,alt:a.img_desc||"Product image",className:"table-select__thumbnail"})),r.createElement("td",null,a.img_desc||"N/A"),r.createElement("td",null,a.img_order),r.createElement("td",null,a.img_media),r.createElement("td",null,r.createElement("button",{onClick:()=>{return r=a.id,void t(`/admin-product-image-put/${r}`,{state:{productId:e}});var r},className:"table-select__button"},"Edit"),r.createElement("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this image?")){h(t);try{await(e=>C.delete(`/images/${e}`))(t),i((e=>e.filter((e=>e.id!==t)))),s({type:"incrementImgCount",data:{productId:parseInt(e),count:-1}}),s({type:"flashMessage",value:"Image deleted successfully!"})}catch(e){var a;s({type:"flashMessage",value:(null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.error)||"Error deleting image"})}finally{h(null)}}})(a.id),className:"table-select__button table-select__button--danger",disabled:E===a.id},E===a.id?"...":"Delete"))))))),r.createElement(n.N_,{to:`/admin-product-put-select/${p.cat_fk}`,className:"form__button form__button--secondary"},"Back to Product List"))):r.createElement(_,{title:"Not Found"},r.createElement("div",{className:"text-center"},r.createElement("p",{className:"text-danger"},"Product not found."),r.createElement(n.N_,{to:"/admin-dashboard",className:"form__button form__button--secondary"},"Back to Dashboard"))):r.createElement(_,{title:"Unauthorized"},r.createElement("p",{className:"text-center text-danger"},"You do not have permission."))},z=function(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),a=(0,r.useContext)(m),[l,s]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),i=(0,r.useRef)(null);return r.createElement("div",{className:"wrapper"},r.createElement("form",{onSubmit:async r=>{if(r.preventDefault(),!l)return void c("Please select an image to upload.");const n=new FormData;n.append("image",l);try{const r=await((e,t)=>C.put(`/images/category/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}}))(e,n);a({type:"updateCategory",data:{cat_id:parseInt(e),cat_img_path:r.data.cat_img_path}}),a({type:"flashMessage",value:"Category image updated successfully!"}),t("/admin-dashboard")}catch(r){var s,o;console.error("Image upload error:",(null===(s=r.response)||void 0===s?void 0:s.data)||r.message),a({type:"flashMessage",value:(null===(o=r.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.error)||"Error updating image"})}},className:"form"},r.createElement("h2",{className:"form__heading"},"Update Category Image"),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"image",className:"form__label"},"Category Image File"),r.createElement("input",{type:"file",name:"image",onChange:e=>{const t=e.target.files[0];if(!t)return c("Please select an image."),void s(null);["image/jpeg","image/png","image/gif"].includes(t.type)?t.size>5242880?(c("Image must be less than 5MB."),s(null)):(c(null),s(t)):(c("Image must be a JPEG, PNG, or GIF."),s(null))},className:"form__input",id:"image",accept:"image/jpeg,image/png,image/gif"}),r.createElement("small",{className:"form__helper-text"},"Select one image (JPEG, PNG, GIF, max 5MB)"),r.createElement(R.A,{nodeRef:i,in:!!o,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0},r.createElement("div",{ref:i,className:"form__validation-message"},o))),r.createElement("div",{className:"form__group"},r.createElement("button",{type:"submit",className:"form__button",disabled:!!o||!l},"Update Image"),r.createElement("button",{type:"button",className:"form__button",style:{marginTop:"0.5rem",backgroundColor:"#6c757d"},onClick:()=>{t("/admin-dashboard")}},"Cancel"))))},j=function(){const{id:e}=(0,n.g)(),t=(0,r.useContext)(c),a=(0,n.Zp)(),{urls:l}=t,[s,o]=(0,r.useState)([]),[m,i]=(0,r.useState)({}),[u,d]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),v=(0,r.useMemo)((()=>s),[s]);return(0,r.useEffect)((()=>{l.api&&(async()=>{d(!0);try{const t=await fetch(`${l.api}/products/category/${e}`);if(t.ok){const e=await t.json();o(Array.isArray(e)?e:[]),g(null)}else g(`Failed to load products: ${t.statusText}`),o([])}catch(e){g("Failed to load products"),o([])}d(!1)})()}),[e,l.api]),(0,r.useEffect)((()=>{l.api&&0!==v.length&&(async()=>{const e={};for(const t of v)if(t.id)try{const a=await fetch(`${l.api}/products/${t.id}/images`);if(a.ok){const r=await a.json();e[t.id]=Array.isArray(r)&&r.length>0?{img_path:r[0].img_path,img_desc:r[0].img_desc||""}:{img_path:null,img_desc:""}}else e[t.id]={img_path:null,img_desc:""}}catch(a){e[t.id]={img_path:null,img_desc:""}}i(e)})()}),[v,l.api]),p?r.createElement(_,{title:"Error"},r.createElement("div",{className:"swiper-container-wrapper"},"Error: ",p)):u?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):s&&0!==s.length?r.createElement(_,{title:"Products"},r.createElement("div",{className:"swiper-container-wrapper"},r.createElement(E.RC,{modules:[h.Vx],spaceBetween:10,slidesPerView:1,navigation:!0,className:"swiper",breakpoints:{640:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}}},s.map((e=>{var s,o;return r.createElement(E.qr,{key:e.id},r.createElement("div",{className:"swiper-slide__card"},r.createElement("img",{src:null!==(s=m[e.id])&&void 0!==s&&s.img_path?`${l.images}${m[e.id].img_path}`:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",alt:e.prod_name||"Product",className:"swiper-slide__image"}),r.createElement("div",{className:"swiper-slide__content"},r.createElement("div",null,r.createElement("h3",{className:"swiper-slide__title"},e.prod_name||"Unknown"),e.prod_desc&&r.createElement("p",{className:"swiper-slide__description"},e.prod_desc),(null===(o=m[e.id])||void 0===o?void 0:o.img_desc)&&r.createElement("p",{className:"swiper-slide__image-desc"},m[e.id].img_desc)),r.createElement("div",{className:"product-slide__footer"},r.createElement(n.N_,{to:"/",className:"product-slide__back-arrow"},r.createElement("img",{src:"/assets/images/icons/back-arrow.svg",alt:"Back to Categories"})),e.prod_cost&&r.createElement(n.N_,{to:`/order/${e.id}`,state:{product:e},onClick:e=>(e=>{t.loggedIn||(e.preventDefault(),a("/"))})(e),className:"product-slide__cost-button"},"$",parseFloat(e.prod_cost).toFixed(2))))))}))))):r.createElement(_,{title:"No Products"},r.createElement("div",{className:"swiper-container-wrapper"},"No products available for this category"))},V=function(){const e=(0,n.Zp)(),t=(0,n.zy)(),{product:a}=t.state||{},l=(0,r.useContext)(m),[s,o]=(0,r.useState)(""),[c,i]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[E,h]=(0,r.useState)(""),[f,v]=(0,r.useState)("USA"),[y,b]=(0,r.useState)(!1);return a?r.createElement(_,{title:"Shipping Information"},r.createElement("form",{onSubmit:async t=>{t.preventDefault(),b(!0);try{const t=await(o={items:[{product_id:a.id,quantity:1}],total_amount:a.prod_cost},C.post("/orders",o)),{order_id:m}=t.data.order;await(r=m,n={shipping_address_line1:s,shipping_address_line2:c,shipping_city:u,shipping_state:p,shipping_postal_code:E,shipping_country:f},C.post(`/orders/${r}/fulfillment`,n)),l({type:"flashMessage",value:"Shipping details saved. Please complete your payment."}),e(`/payment/${m}`)}catch(e){console.error("Error saving shipping info:",e.response?e.response.data:e.message),l({type:"flashMessage",value:"There was a problem saving your address. Please try again."}),b(!1)}var r,n,o},className:"form"},r.createElement("h2",{className:"form__heading"},"Shipping Details"),r.createElement("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"1rem",background:"rgba(0,0,0,0.1)",borderRadius:"4px"}},r.createElement("p",null,"Ordering: ",r.createElement("strong",null,a.prod_name)," for"," ",r.createElement("strong",null,"$",parseFloat(a.prod_cost).toFixed(2)))),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"address1",className:"form__label"},"Address Line 1"),r.createElement("input",{id:"address1",type:"text",className:"form__input",value:s,onChange:e=>o(e.target.value),required:!0,autoComplete:"shipping street-address"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"address2",className:"form__label"},"Address Line 2 (Optional)"),r.createElement("input",{id:"address2",type:"text",className:"form__input",value:c,onChange:e=>i(e.target.value),autoComplete:"shipping address-line2"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"city",className:"form__label"},"City"),r.createElement("input",{id:"city",type:"text",className:"form__input",value:u,onChange:e=>d(e.target.value),required:!0,autoComplete:"shipping address-level2"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"state",className:"form__label"},"State / Province"),r.createElement("input",{id:"state",type:"text",className:"form__input",value:p,onChange:e=>g(e.target.value),required:!0,autoComplete:"shipping address-level1"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"zip",className:"form__label"},"ZIP / Postal Code"),r.createElement("input",{id:"zip",type:"text",className:"form__input",value:E,onChange:e=>h(e.target.value),required:!0,autoComplete:"shipping postal-code"})),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"country",className:"form__label"},"Country"),r.createElement("input",{id:"country",type:"text",className:"form__input",value:f,onChange:e=>v(e.target.value),required:!0,autoComplete:"shipping country"})),r.createElement("button",{type:"submit",className:"form__button",disabled:y},y?"Saving...":"Proceed to Payment"))):(e("/"),null)},Y=function(){const{orderId:e}=(0,n.g)(),t=(0,n.Zp)(),a=(0,r.useContext)(m),[l,s]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[i,u]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{!async function(){try{const t=await(e=>C.get(`/orders/${e}`))(e);c(t.data),s(!1)}catch(e){console.error("Could not fetch order for payment.",e),a({type:"flashMessage",value:"Could not find order details."}),t("/")}}()}),[e,t,a]),l||!o?r.createElement(_,{title:"Loading..."},r.createElement(f,null)):r.createElement(_,{title:"Complete Payment"},r.createElement("div",{className:"form"},r.createElement("h2",{className:"form__heading"},"Confirm & Pay"),r.createElement("div",{className:"payment-summary",style:{marginBottom:"2rem"}},r.createElement("h4",{style:{borderBottom:"1px solid #444",paddingBottom:"0.5rem"}},"Order Summary"),r.createElement("ul",{style:{listStyle:"none",padding:0}},o.items.map((e=>r.createElement("li",{key:e.product_id,style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"}},r.createElement("span",null,e.prod_name," (x",e.quantity,")"),r.createElement("span",null,"$",parseFloat(e.price_at_purchase).toFixed(2)))))),r.createElement("hr",{style:{border:"1px solid #444"}}),r.createElement("p",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.2rem",fontWeight:"bold"}},r.createElement("span",null,"Total:"),r.createElement("span",null,"$",parseFloat(o.total_amount).toFixed(2)))),r.createElement("div",null,r.createElement("h4",{style:{borderBottom:"1px solid #444",paddingBottom:"0.5rem"}},"Payment Method"),r.createElement("div",{className:"form__group"},r.createElement("p",{style:{color:"#ccc"}},'This is a simulated payment gateway. Clicking "Pay" will complete the order.'),r.createElement("div",{style:{background:"#fff",color:"#333",padding:"1.5rem",borderRadius:"8px"}}," Using saved card ending in 4242")),r.createElement("button",{onClick:async()=>{u(!0);try{await(e=>C.post(`/orders/${e}/payments`,{payment_method_token:"tok_visa_payment_form_simulated"}))(e),a({type:"flashMessage",value:"Payment successful! Your order is being processed."}),t("/")}catch(e){console.error("Payment failed.",e.response?e.response.data:e.message),a({type:"flashMessage",value:"Payment failed. Please try again."}),u(!1)}},disabled:i,className:"form__button"},i?"Processing...":`Pay $${parseFloat(o.total_amount).toFixed(2)}`))))},Z=function(){const e=(0,r.useContext)(c),t=(0,r.useContext)(m),[a,l]=(0,r.useState)(""),[n,s]=(0,r.useState)(!1);return r.createElement(_,{title:"Settings"},r.createElement("form",{onSubmit:async function(r){r.preventDefault(),s(!0);try{if(!e.user.user_id)throw new Error("User ID not available. Please log in again.");const r=60*parseInt(a)*1e3;if(isNaN(r)||r<3e5)return t({type:"flashMessage",value:"Refresh interval must be a number and at least 5 minutes."}),void s(!1);await(o=e.user.user_id,c=r,C.put(`/users/${o}/refresh-interval`,{refreshInterval:c})),t({type:"setRefreshInterval",data:r}),t({type:"flashMessage",value:`Refresh interval updated to ${a} minutes.`}),l("")}catch(r){var n;console.error("Update refresh interval error:",r.response?r.response.data:r.message),t({type:"flashMessage",value:(null===(n=r.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.error)||r.message||"Failed to update refresh interval."})}finally{s(!1)}var o,c},className:"form"},r.createElement("h2",{className:"form__heading"},"Token Refresh Settings"),r.createElement("div",{className:"form__group"},r.createElement("label",{htmlFor:"interval-minutes",className:"form__label"},"Refresh Interval (minutes)"),r.createElement("input",{id:"interval-minutes",type:"number",min:"5",value:a,onChange:e=>l(e.target.value),className:"form__input",placeholder:`Current: ${e.user.refresh_interval/6e4} min (minimum 5)`,required:!0})),r.createElement("button",{type:"submit",className:"form__button",disabled:n},n?"Updating...":"Update Interval")))};var G=a(105),W=a.n(G);function H(){const e=(0,r.useContext)(c);return r.createElement(n.BV,null,r.createElement(n.qh,{path:"/",element:e.loggedIn?r.createElement(y,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/request-password-reset",element:r.createElement(k,null)}),r.createElement(n.qh,{path:"/reset-password",element:r.createElement(P,null)}),r.createElement(n.qh,{path:"/register",element:r.createElement(A,null)}),r.createElement(n.qh,{path:"/admin-dashboard",element:e.loggedIn&&e.user.admin?r.createElement($,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-category-post",element:e.loggedIn&&e.user.admin?r.createElement(q,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-category-put-select",element:e.loggedIn&&e.user.admin?r.createElement(M,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-category-put/:id",element:e.loggedIn&&e.user.admin?r.createElement(F,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-category-image-post/:id",element:e.loggedIn&&e.user.admin?r.createElement(z,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-product-put-select/:id",element:e.loggedIn&&e.user.admin?r.createElement(U,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-product-post/:id",element:e.loggedIn&&e.user.admin?r.createElement(D,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-product-put/:id",element:r.createElement(T,null)}),r.createElement(n.qh,{path:"/admin-product-image-post/:id",element:e.loggedIn&&e.user.admin?r.createElement(B,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-product-image-put-select/:id",element:e.loggedIn&&e.user.admin?r.createElement(O,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin-product-image-put/:id",element:e.loggedIn&&e.user.admin?r.createElement(L,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/settings",element:r.createElement(Z,null)}),r.createElement(n.qh,{path:"/category/:id/products",element:r.createElement(j,null)}),r.createElement(n.qh,{path:"/order/:productId",element:e.loggedIn?r.createElement(V,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/admin/adminOrder",element:e.loggedIn&&e.user.admin?r.createElement(W(),null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/order/:productId",element:e.loggedIn?r.createElement(V,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/payment/:orderId",element:e.loggedIn?r.createElement(Y,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"/about-us",element:r.createElement(N,null)}),r.createElement(n.qh,{path:"/terms",element:r.createElement(w,null)}),r.createElement(n.qh,{path:"/home",element:e.loggedIn?r.createElement(y,null):r.createElement(b,null)}),r.createElement(n.qh,{path:"*",element:r.createElement("h1",{className:"text-center"},"404 Page Not Found")}))}const J=function({closeModal:e}){const t=(0,r.useContext)(m),[a,l]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),c=(0,n.Zp)();return r.createElement("form",{onSubmit:async function(r){r.preventDefault();try{const r=await(n={username:a,password:s},C.post("/users/login",n));r.data.token?(t({type:"logIn",data:r.data}),t({type:"flashMessage",value:"You have successfully logged in!"}),c("/"),e&&e()):t({type:"flashMessage",value:"Incorrect username or password."})}catch(r){var l;t({type:"flashMessage",value:(null===(l=r.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.error)||"Login failed. Please try again."})}var n}},r.createElement("div",{className:"form__group"},r.createElement(n.N_,{className:"primary-nav__link",to:"/register",onClick:()=>{e&&e()}},"Register")),r.createElement("div",{className:"form__group"},r.createElement("input",{onChange:e=>l(e.target.value),name:"username",className:"form__input",type:"text",placeholder:"Username",autoComplete:"username"})),r.createElement("div",{className:"form__group"},r.createElement("input",{onChange:e=>o(e.target.value),name:"password",className:"form__input",type:"password",placeholder:"Password",autoComplete:"current-password"})),r.createElement("div",{className:"form__group"},r.createElement("button",{type:"submit",className:"form__button"},"Sign In")))},Q=function(e){const t=(0,r.useContext)(m);return(0,r.useContext)(c),r.createElement("div",null,r.createElement("div",{className:"site-header__btn-container"},r.createElement("button",{onClick:function(){t({type:"logOut"}),window.location="/"},className:"primary-nav__btn"},"Sign Out")))},K=function(){const e=(0,r.useContext)(c),[t,a]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!0);(0,r.useEffect)((()=>{const e=()=>{s(window.innerWidth>=800)};let t;return window.innerWidth<800?t=setTimeout((()=>{s(!1)}),1e3):s(!0),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),clearTimeout(t)}}),[]),(0,r.useEffect)((()=>{t?document.body.classList.add("overlay-is-open"):document.body.classList.remove("overlay-is-open")}),[t]);const o=()=>{a((e=>!e))};return r.createElement(r.Fragment,null,r.createElement("header",{className:"site-header "+(t?"site-header--is-expanded":"")},r.createElement("div",{className:"wrapper"},r.createElement("div",{className:"site-header__logo "+(l?"site-header__logo--large":"")},r.createElement(n.N_,{to:"/"},r.createElement("img",{src:"/assets/images/icons/spp-logo.svg",alt:"SPP Logo",className:"site-header__logo__graphic"}))),r.createElement("div",{className:"site-header__menu-icon "+(t?"site-header__menu-icon--close-x":""),onClick:o},r.createElement("div",{className:"site-header__menu-icon__middle"})),r.createElement("nav",{className:"primary-nav primary-nav--desktop"},r.createElement("ul",null,r.createElement("li",null,r.createElement(n.N_,{to:"/home",className:"primary-nav__link"},"Home")),r.createElement("li",null,r.createElement(n.N_,{to:"/about-us",className:"primary-nav__link"},"About")),r.createElement("li",null,e.loggedIn?r.createElement(Q,null):r.createElement(J,{closeModal:()=>{}})))))),r.createElement("div",{className:"mobile-overlay"},e.loggedIn?r.createElement("nav",{className:"mobile-overlay__nav"},r.createElement("ul",null,r.createElement("li",null,r.createElement(n.N_,{to:"/home",className:"primary-nav__link",onClick:o},"Home")),r.createElement("li",null,r.createElement(n.N_,{to:"/about-us",className:"primary-nav__link",onClick:o},"About")),r.createElement("li",null,r.createElement(n.N_,{to:"/terms",className:"primary-nav__link",onClick:o},"Terms")),r.createElement("li",null,r.createElement(Q,null)))):r.createElement("div",{className:"mobile-overlay__modal-inner"},r.createElement("h2",{className:"section-title section-title--green section-title--less-margin"},"Sign In"),r.createElement("div",{className:"wrapper wrapper--narrow"},r.createElement(J,{closeModal:o})))))},X=function(){const e=(0,r.useContext)(c);return r.createElement("footer",{className:"site-footer"},r.createElement("p",null,r.createElement(n.N_,{to:"/",className:"text-muted white-font"}," ","Home"," ")," ","|"," ",r.createElement(n.N_,{to:"/about-us",className:"mx-1 white-font"},"About Us")," ","|"," ",r.createElement(n.N_,{to:"/terms",className:"mx-1 white-font"},"Terms")," | ",e.loggedIn&&e.user.admin&&r.createElement(r.Fragment,null,r.createElement(n.N_,{to:"/admin-dashboard",className:"mx-1 white-font"},"Admin Dashboard"))),r.createElement("p",null,"All rights reserved. Copyright  ",(new Date).getFullYear()))};class ee extends r.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error",e,t)}render(){return this.state.hasError?r.createElement("h1",null,"Something went wrong. Please try again later."):this.props.children}}function te(){return r.createElement(ee,null,r.createElement(p,null,r.createElement(n.Kd,null,r.createElement(ae,null),r.createElement(K,null),r.createElement("main",{className:"main-content-area"},r.createElement(H,null)),r.createElement(X,null))))}function ae(){const{flashMessages:e}=r.useContext(c);return r.createElement(I,{messages:e})}l.createRoot(document.querySelector("#app")).render(r.createElement(te,null))}},a={};function r(e){var l=a[e];if(void 0!==l)return l.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,a,l,n)=>{if(!a){var s=1/0;for(i=0;i<e.length;i++){a=e[i][0],l=e[i][1],n=e[i][2];for(var o=!0,c=0;c<a.length;c++)(!1&n||s>=n)&&Object.keys(r.O).every((e=>r.O[e](a[c])))?a.splice(c--,1):(o=!1,n<s&&(s=n));if(o){e.splice(i--,1);var m=l();void 0!==m&&(t=m)}}return t}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[a,l,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var l,n,s=a[0],o=a[1],c=a[2],m=0;if(s.some((t=>0!==e[t]))){for(l in o)r.o(o,l)&&(r.m[l]=o[l]);if(c)var i=c(r)}for(t&&t(a);m<s.length;m++)n=s[m],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(i)},a=self.webpackChunkspp_frontend=self.webpackChunkspp_frontend||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=r.O(void 0,[51],(()=>r(842)));l=r.O(l)})();